---
layout: post
title: Mongodb 장단점, 활용시 고민할 사항들
date: 2018-09-26 00:00:00
categories: [Mongodb, NoSQL]
tags: [Mongodb, NoSQL]
comments: true
---

## 장점
1. 비동기 드라이버를 사용할 수 있다.
    * 현재 JDBC의 경우 동기 드라이버만 존재해 블러킹 포인트가 된다.
2. RDB와 개념이 유사해, 쿼리 변환기가 있을 만큼 개념적으로 어색하지 않다.
    * 사용법도 마찬가지로 이질감이 없다.
3. RDB에 비해 성능이 100배 이상 빠르다.
    * 별도의 캐시 솔루션이 필요하지 않을 만큼 성능 문제에서 우월하다.
4. 스키마 관리가 필요 없다.
5. 이미 성숙기에 접어들어 운용, 개발, 유틸리티에 부족함이 없다.
    * Cassandra, Couchbase, Mongodb의 경우 대규모 트래픽, 데이터 저장, fail-over, fault-tolerance에 다양한 대안이 마련 되어있는 상황이다.
    * redis과 비교해봐도 충분히 안정권에 들어온 상태다.
6. 샤드 추가가 간편하다.
    * 다른 NOSQL처럼 리밸런싱은 불가능하지만, 그럼에도 적정 수치때 샤드를 추가해준다면 장점은 충분히 누릴 수 있다.
## 단점
1. 복잡한 쿼리를 사용할 수 없다.
    * join을 사용할 수 없다.
2. 메모리 사용량이 큰 편이다.
    * 메모리 부족 시 퍼포먼스가 급락한다.
3. 데이터 일관성이 보장되지 않는다.
    * 다만, ACID 도입 베타 릴리즈 진행 중이다.
        * http://it-developers.gigblog.net/2417

## 적절한 사용 사례
1. 로그성 데이터의 임시 저장소
2. 빅데이터 처리의 중간 저장소
3. 설정 데이터의 보관소
4. null 필드가 많이 존재할 때 (데이터에 null 필드가 가변으로 다양하게 존재할 경우, rdb보다 스토리지, 처리 속도등에서 효율이 좋다)
5. Redis를 쓰기엔 aggregate나 범위 연산이 필요해서 아쉽고, RDB를 쓰기엔 성능이 걱정 될 때

## 부적절한 사용 사례
1. 데이터 무결성이 가장 중요한 가치 일 때
    * 단일 document 무결성은 유지되지만, 멀티 document 무결성은 유지 되지 않음.
        * 애초에 join이 되지 않는지라, 일말이 오차는 존재할 수 있음.
2. 데이터 처리량보다 일관성 있는 데이터 구조가 중요할 때
    * 데이터 처리량이 빠른 이유는 ACID를 수행하지 않기 때문이다.
    * 특히 샤딩+레플리카를 조합해서 사용 할 때 무결성이 깨진 상태의 데이터가 조회 될 수 있다. (document 자체가 corrupt 된다는 의미는 아니고, 조회한 시점 이전의 데이터가 조회 될 수 있거나, 이미 삭제된 데이터가 조회될 수 있다는 의미)
3. 테이블간 연관 관계가 매우 중요 할 때
    * 위에서 언급한 대로 여러 document (테이블)을 동시에 조회할 수 없다.

#### 참고 자료
* <https://www.mongodb.com/compare/mongodb-mysql>
* <http://blog.kjslab.com/159>
* <http://givemesource.tistory.com/87>
